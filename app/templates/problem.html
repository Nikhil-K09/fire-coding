{% extends 'base.html' %}
{% block content %}
<div class="problem-page">

  <!-- LEFT PANEL: problem description -->
  <div class="problem-panel">
    <h2 class="problem-title">{{ problem.title }}</h2>
    <p class="problem-difficulty">{{ problem.get('difficulty', '') }}</p>

    <section class="problem-section">
      <h3>Description</h3>
      <div class="problem-description">{{ problem.description | safe }}</div>
    </section>

    <section class="problem-section">
      <h4>Constraints</h4>
      <div class="problem-constraints">{{ problem.get('constraints', '') }}</div>
    </section>

    <section class="problem-section">
      <h4>Sample Input</h4>
      <pre class="problem-sample">{{ problem.test_case.input }}</pre>
    </section>

    <section class="problem-section">
      <h4>Sample Output</h4>
      <pre class="problem-sample">{{ problem.test_case.output }}</pre>
    </section>
  </div>

  <!-- RIGHT PANEL: code editor -->
  <div class="editor-panel">
    <label for="lang" class="editor-label">Language</label>
    <select id="lang" class="editor-lang">
      <option value="54" selected>C++ (g++)</option>
      <option value="71">Python 3</option>
      <option value="62">Java</option>
      <option value="50">C</option>
      <option value="51">C#</option>
      <option value="46">Bash</option>
    </select>

    <textarea id="editor"></textarea>

    <div class="buttons">
      <button id="run">â–¶ Run Code</button>
    </div>

    <h4>Test Case Result</h4>
    <pre id="output" class="test-result">Click Run</pre>
  </div>
</div>

<!-- CodeMirror CSS/JS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/material.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/clike/clike.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/closebrackets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/matchbrackets.min.js"></script>

<script>
const STARTER_MAP = {{ problem.get("starter_code", {}) | tojson | safe }};
const PROBLEM_ID = "{{ problem['_id'] }}";
</script>
<script src="/static/js/editor.js"></script>
{% endblock %}
