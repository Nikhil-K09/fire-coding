{% extends 'base.html' %}
{% block content %}
<div style="display:flex; gap:20px;">

  <!-- LEFT PANEL: problem description -->
  <div style="flex:1; max-width:50%;">
    <h2>{{ problem.title }}</h2>
    <p class="difficulty">{{ problem.get('difficulty', '') }}</p>

    <section class="problem-statement">
      <h3>Description</h3>
      <div>{{ problem.description | safe }}</div>

      <h4>Constraints</h4>
      <div>{{ problem.get('constraints', '') }}</div>

      <h4>Sample Input</h4>
      <pre>{{ problem.test_case.input }}</pre>

      <h4>Sample Output</h4>
      <pre>{{ problem.test_case.output }}</pre>
    </section>
  </div>

  <!-- RIGHT PANEL: code editor -->
  <div style="flex:1; max-width:50%;">
    <label for="lang">Language</label>
    <select id="lang">
      <option value="54" selected>C++ (g++)</option>
      <option value="71">Python 3</option>
      <option value="62">Java</option>
      <option value="50">C</option>
      <option value="51">C#</option>
      <option value="46">Bash</option>
    </select>

    <textarea id="editor"></textarea>

    <div class="buttons">
      <button id="run">â–¶ Run Code</button>
    </div>

    <h4>Test Case Result</h4>
    <pre id="output">(no output yet)</pre>
  </div>
</div>

<!-- CodeMirror CSS/JS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/material.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/clike/clike.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/closebrackets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/matchbrackets.min.js"></script>

<script>
const STARTER_MAP = {{ problem.get("starter_code", {}) | tojson | safe }};
const PROBLEM_ID = "{{ problem['_id'] }}";
</script>
<script src="/static/js/editor.js"></script>
{% endblock %}
